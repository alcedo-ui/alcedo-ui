(self.webpackChunkalcedo_ui=self.webpackChunkalcedo_ui||[]).push([[2615],{52615:(e,t,l)=>{"use strict";l.d(t,{Z:()=>j});var n=l(67154),i=l.n(n),r=l(6479),a=l.n(r),o=l(34575),s=l.n(o),u=l(93913),p=l.n(u),c=l(81506),d=l.n(c),f=l(2205),h=l.n(f),m=l(78585),g=l.n(m),v=l(29754),F=l.n(v),y=l(59713),C=l.n(y),b=l(37699),D=l(45697),E=l.n(D),Z=l(11669),P=l(23046),R=l(35720),N=l(62457),S=l(87712),M=l(65248),T=l(79958),w=l(41844),L=l.n(w),I=l(81540),V=l(25681),k=l(67243),O=l(72),A=l(25299),x=l(19605),B=l(57949);var H=function(e){h()(r,e);var t,l,n=(t=r,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=F()(t);if(l){var i=F()(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return g()(this,e)});function r(e){var t;s()(this,r);for(var l=arguments.length,i=new Array(l>1?l-1:0),a=1;a<l;a++)i[a-1]=arguments[a];return t=n.call.apply(n,[this,e].concat(i)),C()(d()(t),"handleNoMatch",(function(){var e,l,n=t.state,i=n.listData,r=n.filter;(!i||i.length<1)&&(null===(e=(l=t.props).onNoMatch)||void 0===e||e.call(l,r))})),C()(d()(t),"handleFilterFocus",(function(){var e,l;if(!t.props.disabled){for(var n=t.props.minFilterLength,i=t.state,r=i.filter,a=i.listData,o={filterFocused:!0},s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];null===(e=(l=t.props).onFocus)||void 0===e||e.call.apply(e,[l].concat(u)),null!=r&&r.length>=n&&(o.popupVisible=!0,o.tempSelectIndex=a.length>0?0:null),t.setState(o)}})),C()(d()(t),"handleFilterBlur",(function(){for(var e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];t.setState({filterFocused:!1},(function(){var e,n;null===(e=(n=t.props).onBlur)||void 0===e||e.call.apply(e,[n].concat(l)),t.handleNoMatch()}))})),C()(d()(t),"handleFilterKeyDown",(function(e){var l=t.props.useDynamicRenderList,n=t.state,i=n.tempSelectIndex,r=n.listData,a=i;38===e.keyCode?a--:40===e.keyCode&&a++;var o=V.Z.range(a,0,r.length-1);t.setState({tempSelectIndex:o},(function(){var n,i,r,a,o;null===(n=(i=t.props).onFilterKeyDown)||void 0===n||n.call(i,e),null===(r=l?null===(a=t.dynamicRenderList)||void 0===a?void 0:a.current:null===(o=t.list)||void 0===o?void 0:o.current)||void 0===r||r.adjustScroll()}))})),C()(d()(t),"handleFilterPressEnter",(function(e,l){var n={};t.props.autoClose&&(n.popupVisible=!1),t.setState(n,(function(){var e,n;null===(e=(n=t.props).onFilterPressEnter)||void 0===e||e.call(n,l),t.handleNoMatch(),t.update()}))})),C()(d()(t),"handleFilterChange",(function(e){var l=t.props,n=l.data,i=l.minFilterLength,r={filter:e,popupVisible:null!=e&&e.length>=i};e?(r.listData=B.Z.filterLocalAutoCompleteData(e,t.props),r.tempSelectIndex=r.listData.length>0?0:null):(r.listData=n,r.tempSelectIndex=null),t.setState(r,(function(){var l,n,i,r,a;null===(l=(n=t.props).onFilterChange)||void 0===l||l.call(n,e),null===(i=t.pop)||void 0===i||null===(r=i.current)||void 0===r||null===(a=r.resetPosition)||void 0===a||a.call(r)}))})),C()(d()(t),"closePopup",(function(){t.setState({popupVisible:!1},(function(){var e,l;return null===(e=(l=t.props).onPopupClosed)||void 0===e?void 0:e.call(l)}))})),C()(d()(t),"popupRenderHandler",(function(e){var l=k.Z.isAbove(t.wrapperEl,t.triggerEl,(0,T.findDOMNode)(e));l!==t.state.isAbove&&t.setState({isAbove:l})})),C()(d()(t),"handleItemClick",(function(e){var l=t.props.autoClose,n={tempSelectIndex:null,value:e},i=t.state.value!=e;n.filter=t.getFilterRender(e),n.filter!==t.state.filter&&(n.listData=B.Z.filterLocalAutoCompleteData(n.filter,t.props)),l&&(n.popupVisible=!1),t.setState(n,(function(){var l,n,r,a;null===(l=(n=t.props).onItemClick)||void 0===l||l.call(n,e),i&&(null===(r=(a=t.props).onChange)||void 0===r||r.call(a,e))}))})),C()(d()(t),"getFilterRender",(function(e){var l=t.props,n=l.valueField,i=l.displayField,r=l.filterRenderer,a=l.renderer;return r?"function"==typeof r?r(e):r:a?a(e):I.Z.getTextByDisplayField(e,i,n)})),C()(d()(t),"update",(function(){var e,l=t.props,n=l.valueField,i=l.displayField,r=l.minFilterLength,a=t.state,o=a.filter,s=a.tempSelectIndex,u=a.listData,p=(null==o?void 0:o.length)>=r?(isNaN(s)?0:s)||0:-1,c={tempSelectIndex:null},d=!1,f=!1;(null==u?void 0:u.length)>0&&(e=p>=0?u[p]:null,c.filter=t.getFilterRender(e),(d=c.filter!==o)&&(c.listData=B.Z.filterLocalAutoCompleteData(c.filter,t.props)),I.Z.getValueByValueField(t.state.value,n,i)!==I.Z.getValueByValueField(e,n,i)&&(f=!0,c.value=u[p])),t.setState(c,(function(){var e,l,n,i;d&&(null===(e=(l=t.props).onFilterChange)||void 0===e||e.call(l,c.filter)),f&&(null===(n=(i=t.props).onChange)||void 0===n||n.call(i,c.value))}))})),C()(d()(t),"handleMouseDown",(function(e){var l;t.state.filterFocused&&!A.Z.isParent(e.target,t.wrapperEl)&&null!==(l=t.pop)&&void 0!==l&&l.current&&!A.Z.isParent(e.target,(0,T.findDOMNode)(t.pop.current))&&t.update()})),t.wrapper=(0,b.createRef)(),t.wrapperEl=null,t.trigger=(0,b.createRef)(),t.triggerEl=null,t.pop=(0,b.createRef)(),t.dynamicRenderList=(0,b.createRef)(),t.list=(0,b.createRef)(),t.state={tempSelectIndex:null,value:e.value,filter:e.filter,filterFocused:!1,popupVisible:!1,isAbove:!1,listData:B.Z.filterLocalAutoCompleteData(e.filter,e)},t}return p()(r,[{key:"componentDidMount",value:function(){var e,t;this.wrapperEl=null===(e=this.wrapper)||void 0===e?void 0:e.current,this.triggerEl=(0,T.findDOMNode)(null===(t=this.trigger)||void 0===t?void 0:t.current),O.Z.addEvent(document,"mousedown",this.handleMouseDown)}},{key:"componentWillUnmount",value:function(){O.Z.removeEvent(document,"mousedown",this.handleMouseDown)}},{key:"render",value:function(){var e=this.props,t=e.className,l=e.triggerClassName,n=e.popupClassName,r=e.style,o=e.popupStyle,s=e.popupTheme,u=e.name,p=e.position,c=e.valueField,d=e.displayField,f=e.descriptionField,h=e.noMatchedPopupVisible,m=e.noMatchedMsg,g=e.popupChildren,v=(e.filterRenderer,e.renderer),F=e.useDynamicRenderList,y=e.listHeight,D=e.itemHeight,E=e.scrollBuffer,S=e.resetPopPositionWait,T=e.onFilterClear,w=e.parentEl,V=(e.data,e.filter,e.filterInitValue,e.minFilterLength,e.autoClose,e.filterCallback,e.onFilterPressEnter,e.onFilterChange,e.onNoMatch,a()(e,["className","triggerClassName","popupClassName","style","popupStyle","popupTheme","name","position","valueField","displayField","descriptionField","noMatchedPopupVisible","noMatchedMsg","popupChildren","filterRenderer","renderer","useDynamicRenderList","listHeight","itemHeight","scrollBuffer","resetPopPositionWait","onFilterClear","parentEl","data","filter","filterInitValue","minFilterLength","autoClose","filterCallback","onFilterPressEnter","onFilterChange","onNoMatch"])),k=this.state,O=k.isAbove,A=k.tempSelectIndex,x=k.value,B=k.filter,H=k.popupVisible,j=k.listData,W=(null==j?void 0:j.length)<1,_=p===M.Z.TOP||p===M.Z.TOP_LEFT||p===M.Z.TOP_RIGHT||!p&&O;return b.createElement("div",{ref:this.wrapper,className:L()("local-auto-complete",C()({},t,t)),style:r},u?b.createElement("input",{type:"hidden",name:u,value:I.Z.getValueByValueField(x,c,d)}):null,b.createElement(Z.Z,i()({},V,{ref:this.trigger,className:L()("local-auto-complete-trigger",W&&!h?"":H?" activated":"",_?" above":" blow",C()({},l,l)),value:B,onFocus:this.handleFilterFocus,onClick:this.handleFilterFocus,onBlur:this.handleFilterBlur,onChange:this.handleFilterChange,onKeyDown:this.handleFilterKeyDown,onPressEnter:this.handleFilterPressEnter,onClear:T,onRightIconClick:this.handleFilterPressEnter})),W&&!h?null:b.createElement(P.Z,{ref:this.pop,className:L()("local-auto-complete-popup",_?" above":" blow",C()({},n,n)),style:Object.assign({width:this.triggerEl&&getComputedStyle(this.triggerEl).width},o),theme:s,visible:H,triggerEl:this.triggerEl,parentEl:w,hasTriangle:!1,position:p||(O?M.Z.TOP_LEFT:M.Z.BOTTOM_LEFT),resetPositionWait:S,onRender:this.popupRenderHandler,onRequestClose:this.closePopup},W?b.createElement(R.Z,{className:"local-auto-complete-list",theme:s,data:[{itemRenderer:function(){return b.createElement("div",{className:"no-matched-list-item"},m||b.createElement("span",null,b.createElement("i",{className:"fas fa-exclamation-triangle no-matched-list-item-icon"}),"No matched value."))},disableTouchRipple:!0}]}):F?b.createElement(N.Z,{ref:this.dynamicRenderList,className:"local-auto-complete-list",theme:s,data:j,value:j[A],valueField:c,displayField:d,descriptionField:f,renderer:v,listHeight:y,itemHeight:D,scrollBuffer:E,onItemClick:this.handleItemClick}):b.createElement(R.Z,{ref:this.list,className:"local-auto-complete-list",theme:s,data:j,value:j[A],valueField:c,displayField:d,descriptionField:f,renderer:v,onItemClick:this.handleItemClick}),g))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var l=x.Z.getDerivedState(e,t,"filter");return{prevProps:e,value:x.Z.getDerivedState(e,t,"value"),filter:l,listData:B.Z.filterLocalAutoCompleteData(l,e)}}}]),r}(b.Component);C()(H,"Theme",S.Z),C()(H,"Position",M.Z),H.propTypes={className:E().string,triggerClassName:E().string,popupClassName:E().string,style:E().object,popupStyle:E().object,theme:E().oneOf(I.Z.enumerateValue(S.Z)),popupTheme:E().oneOf(I.Z.enumerateValue(S.Z)),position:E().oneOf(I.Z.enumerateValue(M.Z)),name:E().string,title:E().string,placeholder:E().string,data:E().oneOfType([E().arrayOf(E().oneOfType([E().shape({className:E().string,style:E().object,theme:E().oneOf(I.Z.enumerateValue(S.Z)),value:E().oneOfType([E().string,E().number]),desc:E().oneOfType([E().string,E().number]),disabled:E().bool,isLoading:E().bool,disableTouchRipple:E().bool,iconCls:E().string,rightIconCls:E().string,itemRenderer:E().func,onClick:E().func}),E().string,E().number])),E().array]).isRequired,value:E().any,disabled:E().bool,valueField:E().string,displayField:E().string,descriptionField:E().string,autoClose:E().bool,minFilterLength:E().number,filterCallback:E().func,iconCls:E().string,rightIconCls:E().string,noMatchedPopupVisible:E().bool,noMatchedMsg:E().string,popupChildren:E().any,filter:E().string,useDynamicRenderList:E().bool,resetPopPositionWait:E().number,listHeight:E().number,itemHeight:E().number,scrollBuffer:E().number,parentEl:E().object,filterInitValue:E().string,renderer:E().func,filterRenderer:E().oneOfType([E().number,E().string,E().func]),onFilterKeyDown:E().func,onFilterPressEnter:E().func,onFilterChange:E().func,onFilterClear:E().func,onChange:E().func,onItemClick:E().func,onFocus:E().func,onBlur:E().func,onMouseOver:E().func,onMouseOut:E().func,onNoMatch:E().func,onPopupClosed:E().func},H.defaultProps={theme:S.Z.DEFAULT,popupTheme:S.Z.DEFAULT,data:[],disabled:!1,valueField:"value",displayField:"text",descriptionField:"desc",autoClose:!0,minFilterLength:1,rightIconCls:"fas fa-search",noMatchedPopupVisible:!0,filter:"",useDynamicRenderList:!1,resetPopPositionWait:250};const j=H}}]);