"use strict";(self.webpackChunkalcedo_ui=self.webpackChunkalcedo_ui||[]).push([[2615],{52615:(e,t,l)=>{l.d(t,{Z:()=>I});var n=l(87462),i=l(45987),r=l(15671),a=l(43144),o=l(97326),s=l(60136),u=l(82963),p=l(61120),c=l(4942),d=l(37699),f=l(45697),h=l.n(f),m=l(11669),g=l(23046),v=l(35720),F=l(62457),Z=l(87712),y=l(65248),C=l(79958),b=l(41844),P=l.n(b),D=l(81540),E=l(25681),R=l(67243),N=l(72),M=l(25299),S=l(19605),T=l(57949),w=["className","triggerClassName","popupClassName","style","popupStyle","popupTheme","name","position","valueField","displayField","descriptionField","noMatchedPopupVisible","noMatchedMsg","popupChildren","filterRenderer","renderer","useDynamicRenderList","listHeight","itemHeight","scrollBuffer","resetPopPositionWait","onFilterClear","parentEl","data","filter","filterInitValue","minFilterLength","autoClose","filterCallback","onFilterPressEnter","onFilterChange","onNoMatch"];var L=function(e){(0,s.Z)(h,e);var t,l,f=(t=h,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(l){var i=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function h(e){var t;(0,r.Z)(this,h);for(var l=arguments.length,n=new Array(l>1?l-1:0),i=1;i<l;i++)n[i-1]=arguments[i];return t=f.call.apply(f,[this,e].concat(n)),(0,c.Z)((0,o.Z)(t),"handleNoMatch",(function(){var e,l,n=t.state,i=n.listData,r=n.filter;(!i||i.length<1)&&(null===(e=(l=t.props).onNoMatch)||void 0===e||e.call(l,r))})),(0,c.Z)((0,o.Z)(t),"handleFilterFocus",(function(){var e,l;if(!t.props.disabled){for(var n=t.props.minFilterLength,i=t.state,r=i.filter,a=i.listData,o={filterFocused:!0},s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];null===(e=(l=t.props).onFocus)||void 0===e||e.call.apply(e,[l].concat(u)),null!=r&&r.length>=n&&(o.popupVisible=!0,o.tempSelectIndex=a.length>0?0:null),t.setState(o)}})),(0,c.Z)((0,o.Z)(t),"handleFilterBlur",(function(){for(var e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];t.setState({filterFocused:!1},(function(){var e,n;null===(e=(n=t.props).onBlur)||void 0===e||e.call.apply(e,[n].concat(l)),t.handleNoMatch()}))})),(0,c.Z)((0,o.Z)(t),"handleFilterKeyDown",(function(e){var l=t.props.useDynamicRenderList,n=t.state,i=n.tempSelectIndex,r=n.listData,a=i;38===e.keyCode?a--:40===e.keyCode&&a++;var o=E.ZP.range(a,0,r.length-1);t.setState({tempSelectIndex:o},(function(){var n,i,r,a,o;null===(n=(i=t.props).onFilterKeyDown)||void 0===n||n.call(i,e),null===(r=l?null===(a=t.dynamicRenderList)||void 0===a?void 0:a.current:null===(o=t.list)||void 0===o?void 0:o.current)||void 0===r||r.adjustScroll()}))})),(0,c.Z)((0,o.Z)(t),"handleFilterPressEnter",(function(e,l){var n={};t.props.autoClose&&(n.popupVisible=!1),t.setState(n,(function(){var e,n;null===(e=(n=t.props).onFilterPressEnter)||void 0===e||e.call(n,l),t.handleNoMatch(),t.update()}))})),(0,c.Z)((0,o.Z)(t),"handleFilterChange",(function(e){var l=t.props,n=l.data,i=l.minFilterLength,r={filter:e,popupVisible:null!=e&&e.length>=i};e?(r.listData=T.Z.filterLocalAutoCompleteData(e,t.props),r.tempSelectIndex=r.listData.length>0?0:null):(r.listData=n,r.tempSelectIndex=null),t.setState(r,(function(){var l,n,i,r,a;null===(l=(n=t.props).onFilterChange)||void 0===l||l.call(n,e),null===(i=t.pop)||void 0===i||null===(r=i.current)||void 0===r||null===(a=r.resetPosition)||void 0===a||a.call(r)}))})),(0,c.Z)((0,o.Z)(t),"closePopup",(function(){t.setState({popupVisible:!1},(function(){var e,l;return null===(e=(l=t.props).onPopupClosed)||void 0===e?void 0:e.call(l)}))})),(0,c.Z)((0,o.Z)(t),"popupRenderHandler",(function(e){var l=R.Z.isAbove(t.wrapperEl,t.triggerEl,(0,C.findDOMNode)(e));l!==t.state.isAbove&&t.setState({isAbove:l})})),(0,c.Z)((0,o.Z)(t),"handleItemClick",(function(e){var l=t.props.autoClose,n={tempSelectIndex:null,value:e},i=t.state.value!=e;n.filter=t.getFilterRender(e),n.filter!==t.state.filter&&(n.listData=T.Z.filterLocalAutoCompleteData(n.filter,t.props)),l&&(n.popupVisible=!1),t.setState(n,(function(){var l,n,r,a;null===(l=(n=t.props).onItemClick)||void 0===l||l.call(n,e),i&&(null===(r=(a=t.props).onChange)||void 0===r||r.call(a,e))}))})),(0,c.Z)((0,o.Z)(t),"getFilterRender",(function(e){var l=t.props,n=l.valueField,i=l.displayField,r=l.filterRenderer,a=l.renderer;return r?"function"==typeof r?r(e):r:a?a(e):D.ZP.getTextByDisplayField(e,i,n)})),(0,c.Z)((0,o.Z)(t),"update",(function(){var e,l=t.props,n=l.valueField,i=l.displayField,r=l.minFilterLength,a=t.state,o=a.filter,s=a.tempSelectIndex,u=a.listData,p=(null==o?void 0:o.length)>=r?(isNaN(s)?0:s)||0:-1,c={tempSelectIndex:null},d=!1,f=!1;(null==u?void 0:u.length)>0&&(e=p>=0?u[p]:null,c.filter=t.getFilterRender(e),(d=c.filter!==o)&&(c.listData=T.Z.filterLocalAutoCompleteData(c.filter,t.props)),D.ZP.getValueByValueField(t.state.value,n,i)!==D.ZP.getValueByValueField(e,n,i)&&(f=!0,c.value=u[p])),t.setState(c,(function(){var e,l,n,i;d&&(null===(e=(l=t.props).onFilterChange)||void 0===e||e.call(l,c.filter)),f&&(null===(n=(i=t.props).onChange)||void 0===n||n.call(i,c.value))}))})),(0,c.Z)((0,o.Z)(t),"handleMouseDown",(function(e){var l;t.state.filterFocused&&!M.ZP.isParent(e.target,t.wrapperEl)&&null!==(l=t.pop)&&void 0!==l&&l.current&&!M.ZP.isParent(e.target,(0,C.findDOMNode)(t.pop.current))&&t.update()})),t.wrapper=(0,d.createRef)(),t.wrapperEl=null,t.trigger=(0,d.createRef)(),t.triggerEl=null,t.pop=(0,d.createRef)(),t.dynamicRenderList=(0,d.createRef)(),t.list=(0,d.createRef)(),t.state={tempSelectIndex:null,value:e.value,filter:e.filter,filterFocused:!1,popupVisible:!1,isAbove:!1,listData:T.Z.filterLocalAutoCompleteData(e.filter,e)},t}return(0,a.Z)(h,[{key:"componentDidMount",value:function(){var e,t;this.wrapperEl=null===(e=this.wrapper)||void 0===e?void 0:e.current,this.triggerEl=(0,C.findDOMNode)(null===(t=this.trigger)||void 0===t?void 0:t.current),N.Z.addEvent(document,"mousedown",this.handleMouseDown)}},{key:"componentWillUnmount",value:function(){N.Z.removeEvent(document,"mousedown",this.handleMouseDown)}},{key:"render",value:function(){var e=this.props,t=e.className,l=e.triggerClassName,r=e.popupClassName,a=e.style,o=e.popupStyle,s=e.popupTheme,u=e.name,p=e.position,f=e.valueField,h=e.displayField,Z=e.descriptionField,C=e.noMatchedPopupVisible,b=e.noMatchedMsg,E=e.popupChildren,R=(e.filterRenderer,e.renderer),N=e.useDynamicRenderList,M=e.listHeight,S=e.itemHeight,T=e.scrollBuffer,L=e.resetPopPositionWait,I=e.onFilterClear,V=e.parentEl,k=(e.data,e.filter,e.filterInitValue,e.minFilterLength,e.autoClose,e.filterCallback,e.onFilterPressEnter,e.onFilterChange,e.onNoMatch,(0,i.Z)(e,w)),O=this.state,B=O.isAbove,A=O.tempSelectIndex,x=O.value,H=O.filter,j=O.popupVisible,W=O.listData,_=(null==W?void 0:W.length)<1,K=p===y.Z.TOP||p===y.Z.TOP_LEFT||p===y.Z.TOP_RIGHT||!p&&B;return d.createElement("div",{ref:this.wrapper,className:P()("local-auto-complete",(0,c.Z)({},t,t)),style:a},u?d.createElement("input",{type:"hidden",name:u,value:D.ZP.getValueByValueField(x,f,h)}):null,d.createElement(m.Z,(0,n.Z)({},k,{ref:this.trigger,className:P()("local-auto-complete-trigger",_&&!C?"":j?" activated":"",K?" above":" blow",(0,c.Z)({},l,l)),value:H,onFocus:this.handleFilterFocus,onClick:this.handleFilterFocus,onBlur:this.handleFilterBlur,onChange:this.handleFilterChange,onKeyDown:this.handleFilterKeyDown,onPressEnter:this.handleFilterPressEnter,onClear:I,onRightIconClick:this.handleFilterPressEnter})),_&&!C?null:d.createElement(g.Z,{ref:this.pop,className:P()("local-auto-complete-popup",K?" above":" blow",(0,c.Z)({},r,r)),style:Object.assign({width:this.triggerEl&&getComputedStyle(this.triggerEl).width},o),theme:s,visible:j,triggerEl:this.triggerEl,parentEl:V,hasTriangle:!1,position:p||(B?y.Z.TOP_LEFT:y.Z.BOTTOM_LEFT),resetPositionWait:L,onRender:this.popupRenderHandler,onRequestClose:this.closePopup},_?d.createElement(v.Z,{className:"local-auto-complete-list",theme:s,data:[{itemRenderer:function(){return d.createElement("div",{className:"no-matched-list-item"},b||d.createElement("span",null,d.createElement("i",{className:"fas fa-exclamation-triangle no-matched-list-item-icon"}),"No matched value."))},disableTouchRipple:!0}]}):N?d.createElement(F.Z,{ref:this.dynamicRenderList,className:"local-auto-complete-list",theme:s,data:W,value:W[A],valueField:f,displayField:h,descriptionField:Z,renderer:R,listHeight:M,itemHeight:S,scrollBuffer:T,onItemClick:this.handleItemClick}):d.createElement(v.Z,{ref:this.list,className:"local-auto-complete-list",theme:s,data:W,value:W[A],valueField:f,displayField:h,descriptionField:Z,renderer:R,onItemClick:this.handleItemClick}),E))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var l=S.Z.getDerivedState(e,t,"filter");return{prevProps:e,value:S.Z.getDerivedState(e,t,"value"),filter:l,listData:T.Z.filterLocalAutoCompleteData(l,e)}}}]),h}(d.Component);(0,c.Z)(L,"Theme",Z.Z),(0,c.Z)(L,"Position",y.Z),L.propTypes={className:h().string,triggerClassName:h().string,popupClassName:h().string,style:h().object,popupStyle:h().object,theme:h().oneOf(D.ZP.enumerateValue(Z.Z)),popupTheme:h().oneOf(D.ZP.enumerateValue(Z.Z)),position:h().oneOf(D.ZP.enumerateValue(y.Z)),name:h().string,title:h().string,placeholder:h().string,data:h().oneOfType([h().arrayOf(h().oneOfType([h().shape({className:h().string,style:h().object,theme:h().oneOf(D.ZP.enumerateValue(Z.Z)),value:h().oneOfType([h().string,h().number]),desc:h().oneOfType([h().string,h().number]),disabled:h().bool,isLoading:h().bool,disableTouchRipple:h().bool,iconCls:h().string,rightIconCls:h().string,itemRenderer:h().func,onClick:h().func}),h().string,h().number])),h().array]).isRequired,value:h().any,disabled:h().bool,valueField:h().string,displayField:h().string,descriptionField:h().string,autoClose:h().bool,minFilterLength:h().number,filterCallback:h().func,iconCls:h().string,rightIconCls:h().string,noMatchedPopupVisible:h().bool,noMatchedMsg:h().string,popupChildren:h().any,filter:h().string,useDynamicRenderList:h().bool,resetPopPositionWait:h().number,listHeight:h().number,itemHeight:h().number,scrollBuffer:h().number,parentEl:h().object,filterInitValue:h().string,renderer:h().func,filterRenderer:h().oneOfType([h().number,h().string,h().func]),onFilterKeyDown:h().func,onFilterPressEnter:h().func,onFilterChange:h().func,onFilterClear:h().func,onChange:h().func,onItemClick:h().func,onFocus:h().func,onBlur:h().func,onMouseOver:h().func,onMouseOut:h().func,onNoMatch:h().func,onPopupClosed:h().func},L.defaultProps={theme:Z.Z.DEFAULT,popupTheme:Z.Z.DEFAULT,data:[],disabled:!1,valueField:"value",displayField:"text",descriptionField:"desc",autoClose:!0,minFilterLength:1,rightIconCls:"fas fa-search",noMatchedPopupVisible:!0,filter:"",useDynamicRenderList:!1,resetPopPositionWait:250};const I=L}}]);