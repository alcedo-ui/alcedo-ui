(self.webpackChunkalcedo_ui=self.webpackChunkalcedo_ui||[]).push([[2103],{62103:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var a=n(319),i=n.n(a),r=n(34575),l=n.n(r),o=n(93913),s=n.n(o),u=n(81506),d=n.n(u),c=n(2205),p=n.n(c),h=n(78585),f=n.n(h),m=n(29754),g=n.n(m),v=n(59713),y=n.n(v),E=n(37699),b=n(45697),x=n.n(b),w=n(41844),S=n.n(w),C=n(92742),I=n.n(C),T=n(17185),W=n(96453),D=n(81540),F=n(25299),R=n(45513),k=n(72),A=n(19605),N=n(57949);var Z=function(e){p()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=g()(t);if(n){var i=g()(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return f()(this,e)});function r(e){var t;l()(this,r);for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return t=a.call.apply(a,[this,e].concat(o)),y()(d()(t),"getIndex",(function(){var e=t.props,n=e.data,a=e.listHeight,i=e.itemHeight,r=e.scrollBuffer,l=e.column,o=t.state.scrollTop;return N.Z.displayIndexByScrollTopMulColumns(n,a,i,l,o,r)})),y()(d()(t),"handleScroll",(function(e){t.setState({scrollTop:t.wrapperEl?t.wrapperEl.scrollTop:0},(function(){var n=t.props.onScroll;n&&n(e)}))})),y()(d()(t),"getSeparators",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props.separators;return e&&e.length>0?e:DEFAULT_SEPARATORS})),y()(d()(t),"generateSeparatorReg",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props.separators,n=t.getSeparators(e);return new RegExp("\\s*".concat(n?n.map((function(e){return"\\".concat(e)})).join("|"):"","\\s*"),"g")})),y()(d()(t),"removeItem",(function(e){var n=t.state.data;!n||n.length<1||!(e in n)||(n.splice(e,1),t.setState({data:n},(function(){var e=t.props.onChange;e&&e(n)})))})),y()(d()(t),"handleMouseDown",(function(e){if(!(t.props.disabled||F.Z.findParentByClassName(e.target,"tag-field-item-wrapper")||F.Z.hasClass(e.target,"tag-field-input"))){var n=function(e){var t=this;return function(){if(t.state.itemEditing||t.wrapperEl&&F.Z.findParentByClassName(e.target,"dynamic-tag-field")!=t.wrapperEl)t.setState({inputIndex:t.state.data.length});else{var n=e.clientX,a=e.clientY;n&&a&&F.Z.getOffset(t.wrapperEl)&&setTimeout((function(){t.inputEl&&t.inputEl.focus()}),0)}}}.bind(d()(t))(e);t.state.inputValue?t.insertInputValue(n):n()}})),y()(d()(t),"handleInputChange",(function(e){if(!t.props.disabled){var n=e.target.value,a=n?n.replace(/\r?\n/gm,""):n;t.setState({inputValue:a},(function(){var e=t.props.onInputChange,n=R.Z.calculateStringWidth(a,t.testEl);t.inputWrapperEl&&(t.inputWrapperEl.style.width="".concat(n+9,"px")),t.inputEl&&(t.inputEl.style.height=Math.max(t.inputEl.scrollHeight,24)+"px"),e&&e(a)}))}})),y()(d()(t),"handleInputKeyDown",(function(e){t.props.disabled||13===e.keyCode&&t.insertInputValue()})),y()(d()(t),"insertInputValue",(function(e){if(!t.props.disabled){var n=t.state,a=n.data,r=n.inputValue,l=n.inputIndex;if(r){var o=I()(r).split(t.generateSeparatorReg()).filter((function(e){return!!e}));a.splice.apply(a,[l,0].concat(i()(o))),t.setState({data:a,inputValue:"",inputIndex:l+o.length},(function(){t.inputWrapperEl&&(t.inputWrapperEl.style.width="9px"),t.inputEl&&(t.inputEl.style.height="24px");var n=t.props.onChange;n&&n(a),e&&e()}))}}})),y()(d()(t),"handleItemChange",(function(e,n){if(!t.props.disabled){var a=t.state.data;if(e){var r=e.split(t.generateSeparatorReg()).filter((function(e){return e}));a.splice.apply(a,[n,1].concat(i()(r)))}else a.splice(n,1);t.setState({data:a},(function(){var e=t.props.onChange;e&&e(a)}))}})),y()(d()(t),"handleItemEditStart",(function(e){t.props.disabled||t.setState({itemEditing:!0,editingItemIndex:e})})),y()(d()(t),"handleItemEditEnd",(function(){t.props.disabled||t.setState({itemEditing:!1})})),t.inputSymbol=Symbol("input"),t.wrapper=(0,E.createRef)(),t.wrapperEl=null,t.inputWrapper=(0,E.createRef)(),t.inputWrapperEl=null,t.input=(0,E.createRef)(),t.inputEl=null,t.test=(0,E.createRef)(),t.testEl=null,t.state={scrollTop:0,wrapperWidth:"auto",data:e.data,inputValue:e.inputValue,inputIndex:e.data.length,itemEditing:!1,editingItemIndex:-1},t}return s()(r,[{key:"componentDidMount",value:function(){k.Z.addEvent(document,"mousedown",this.handleMouseDown),this.wrapperEl=this.wrapper&&this.wrapper.current,this.inputWrapperEl=this.inputWrapper&&this.inputWrapper.current,this.inputEl=this.input&&this.input.current,this.testEl=this.test&&this.test.current,this.setState({wrapperWidth:this.wrapperEl?this.wrapperEl.clientWidth:"auto"})}},{key:"componentWillUnmount",value:function(){k.Z.removeEvent(document,"mousedown",this.handleMouseDown)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.style,i=t.valueField,r=t.displayField,l=t.disabled,o=t.placeholder,s=t.isTagAutoWidth,u=t.tagRemoveIconCls,d=t.itemHeight,c=t.column,p=this.state,h=p.wrapperWidth,f=p.data,m=p.inputValue,g=p.inputIndex,v=this.getIndex(),b=f&&v?f.slice(v.startWithBuffer,v.stopWithBuffer+1):f,x=D.Z.genIndexArray(b.length);return x.splice(g,0,this.inputSymbol),E.createElement("div",{ref:this.wrapper,className:S()("dynamic-tag-field",y()({},n,n)),style:a,disabled:l,onScroll:this.handleScroll},E.createElement("div",{className:"dynamic-render-list-scroller",style:{height:Math.ceil(f.length/c)*d}},E.createElement("div",{className:"dynamic-render-tag-field-transform",style:{transform:"translateY(".concat(v.startWithBuffer*d/c,"px)"),height:x.length>1?"auto":"108px"}},x&&x.map((function(t){return t===e.inputSymbol?null:E.createElement("span",{key:t,"data-index":t,className:S()("tag-field-item-wrapper",y()({},b[t].className,b[t].className))},E.createElement(T.Z,{className:"tag-field-item-field",value:D.Z.getTextByDisplayField(b[t],r,i),autoWidth:s,onChange:function(n){return e.handleItemChange(n,t+v.startWithBuffer)},onEditStart:function(){return e.handleItemEditStart(t+v.startWithBuffer)},onEditEnd:e.handleItemEditEnd},E.createElement(W.Z,{className:"tag-field-item-field-delete-button",iconCls:u,onClick:function(){return e.removeItem(t+v.startWithBuffer)}})))})))),E.createElement("div",{key:"input",ref:this.inputWrapper,className:"tag-field-input-wrapper"},E.createElement("textarea",{ref:this.input,className:"tag-field-input",style:{width:h},autoFocus:!0,value:m,placeholder:b.length<1&&o?o:"",onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown})),E.createElement("div",{ref:this.test,className:"tag-field-test-container"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{prevProps:e,data:A.Z.getDerivedState(e,t,"data"),inputValue:A.Z.getDerivedState(e,t,"inputValue")}}}]),r}(E.Component);y()(Z,"DEFAULT_SEPARATORS",[","]),Z.propTypes={className:x().string,style:x().object,listHeight:x().number,itemHeight:x().number,scrollBuffer:x().number,column:x().number,data:x().array,inputValue:x().oneOfType([x().string,x().number]),valueField:x().string,displayField:x().string,separators:x().array,disabled:x().bool,placeholder:x().string,isTagAutoWidth:x().bool,tagRemoveIconCls:x().string,onChange:x().func,onInputChange:x().func,onScroll:x().func},Z.defaultProps={data:[],inputValue:"",valueField:"value",displayField:"text",separators:Z.DEFAULT_SEPARATORS,disabled:!1,placeholder:"",isTagAutoWidth:!0,tagRemoveIconCls:"fas fa-times",listHeight:200,itemHeight:34,scrollBuffer:24,column:4};const M=Z},17185:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var a=n(34575),i=n.n(a),r=n(81506),l=n.n(r),o=n(93913),s=n.n(o),u=n(2205),d=n.n(u),c=n(78585),p=n.n(c),h=n(29754),f=n.n(h),m=n(59713),g=n.n(m),v=n(37699),y=n(45697),E=n.n(y),b=n(58776),x=n(88787),w=n(41844),S=n.n(w),C=n(92742),I=n.n(C),T=n(72),W=n(19605);var D=function(e){d()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=f()(t);if(n){var i=f()(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return p()(this,e)});function r(e){var t;i()(this,r);for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return t=a.call.apply(a,[this,e].concat(o)),g()(l()(t),"triggerElement",(function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1})),g()(l()(t),"handleInputChange",(function(e){t.setState({changeText:e})})),g()(l()(t),"showInput",(function(e){t.setState({hide:!1},(function(){t.textField&&t.textField.current&&t.textField.current.focus(),t.props.onEditStart&&t.props.onEditStart(e)}))})),g()(l()(t),"handleDown",(function(e){var n=e||event;!1!==t.state.hide||t.triggerElement(n.target,t.editableFieldEl)||t.finishEdit(e)})),g()(l()(t),"finishEdit",(function(e){var n=t.state.text!==t.state.changeText;n&&t.props.beforeChange&&!1===t.props.beforeChange(t.state.changeText)?e.preventDefault():t.setState({hide:!0,text:I()(t.state.changeText),changeText:I()(t.state.changeText)},(function(){t.props.onEditEnd&&t.props.onEditEnd(e),n&&t.props.onChange&&t.props.onChange(t.state.text)}))})),g()(l()(t),"handleKeyDown",(function(e){var n=t.props.regExp;return n&&!n.test(e.key)?(event.preventDefault(),!1):(13===e.keyCode&&t.finishEdit(e),!0)})),t.editableField=(0,v.createRef)(),t.editableFieldEl=null,t.editableFieldText=(0,v.createRef)(),t.editableFieldTextEl=null,t.textField=(0,v.createRef)(),t.state={hide:!0,text:e.value,changeText:e.value,inputAutoWidth:0},t}return s()(r,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n,a={prevProps:e},i=W.Z.getDerivedState(e,t,"value","text");return i!==t.text&&(a.text=i,a.changeText=i),!0===e.disabled&&e.disabled!==(null===(n=t.prevProps)||void 0===n?void 0:n.disabled)&&(a.hide=!0),a}}]),s()(r,[{key:"componentDidMount",value:function(){this.editableFieldEl=this.editableField&&this.editableField.current,this.editableFieldTextEl=this.editableFieldText&&this.editableFieldText.current,T.Z.addEvent(document,"mousedown",this.handleDown),T.Z.addEvent(document,"keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e=this.state.inputAutoWidth,t=this.editableFieldTextEl&&this.editableFieldTextEl.offsetWidth;e!==t&&this.setState({inputAutoWidth:t})}},{key:"componentWillUnmount",value:function(){T.Z.removeEvent(document,"mousedown",this.handleDown),T.Z.removeEvent(document,"keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.style,i=e.name,r=e.disabled,l=e.tip,o=e.tipPosition,s=e.title,u=e.onMouseDown,d=e.onClick,c=e.showModal,p=e.maxLength,h=e.autoWidth,f=e.parentEl,m=this.state,y=m.changeText,E=m.text,w=m.hide,C=m.inputAutoWidth,I=h&&"number"==typeof C?{width:parseInt(C)+42}:{};return v.createElement(x.Z,{tipContent:l,parentEl:f,position:o},v.createElement("div",{ref:this.editableField,className:S()("editable-field",g()({},n,n)),style:a,title:"".concat(r?"":s),onMouseDown:u,onClick:d},v.createElement("span",{className:"editable-field-hidden-text",ref:this.editableFieldText,disabled:r},y),v.createElement("span",{className:"editable-field-text",disabled:r},E),!0===w?v.createElement("span",{className:"editable-field-span",onClick:this.showInput},E,v.createElement("i",{className:"fas fa-pencil-alt editable-field-icon","aria-hidden":"true"})):v.createElement(b.Z,{ref:this.textField,style:I,className:"editable-field-input",maxLength:p,value:y,onChange:this.handleInputChange}),v.createElement("input",{type:"hidden",value:E,readOnly:!0,name:i}),c&&!w?v.createElement("div",{className:"editable-modal",onClick:this.finishEdit}):null,t))}}]),r}(v.Component);D.propTypes={children:E().any,className:E().string,style:E().object,value:E().string,name:E().string,title:E().string,maxLength:E().number,tip:E().string,tipPosition:E().string,regExp:E().object,disabled:E().bool,showModal:E().bool,autoWidth:E().bool,parentEl:E().object,onMouseDown:E().func,onClick:E().func,onBlur:E().func,onChange:E().func,onEditStart:E().func,onEditEnd:E().func,beforeChange:E().func},D.defaultProps={title:"",value:"text",name:"",disabled:!1,showModal:!1,autoWidth:!1};const F=D},45513:(e,t,n)=>{"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,{Z:()=>l});var i={};function r(e,t){return e&&t?e in i?i[e]:(t.innerHTML=e.repeat(100),i[e]=t.getBoundingClientRect().width/100):0}const l={calculateCharWidth:r,calculateStringWidth:function(e,t){if(!e||!t)return 0;var n,i=0,l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw l}}}}(e);try{for(l.s();!(n=l.n()).done;)i+=r(n.value,t)}catch(e){l.e(e)}finally{l.f()}return i}}}}]);